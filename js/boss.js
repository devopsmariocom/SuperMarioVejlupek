class Boss{constructor(t,i){this.x=t,this.y=i,this.width=80,this.height=100,this.health=5,this.color="#8B008B",this.bananas=[],this.throwTimer=0,this.throwInterval=120,this.active=!1}update(t){if(!this.active&&Math.abs(t.x-this.x)<800&&(this.active=!0),this.active){this.throwTimer++,this.throwTimer>=this.throwInterval&&(this.throwBanana(t),this.throwTimer=0,this.throwInterval=Math.max(60,120-10*(5-this.health)));for(let t=this.bananas.length-1;t>=0;t--)this.bananas[t].update(),(this.bananas[t].y>800||this.bananas[t].x<-100||this.bananas[t].x>4e3)&&this.bananas.splice(t,1)}}throwBanana(t){const i=t.x-this.x,h=t.y-this.y,s=Math.sqrt(i*i+h*h),a=i/s*8,e=h/s*8-2;this.bananas.push(new Banana(this.x+this.width/2,this.y+20,a,e))}draw(t,i){t.fillStyle=this.color,t.fillRect(this.x-i,this.y,this.width,this.height),t.fillStyle="#000000",t.fillRect(this.x-i+20,this.y+30,10,10),t.fillRect(this.x-i+50,this.y+30,10,10),t.fillRect(this.x-i+30,this.y+60,20,5),t.fillStyle="#FFD700",t.beginPath(),t.moveTo(this.x-i+10,this.y+10),t.lineTo(this.x-i+30,this.y-10),t.lineTo(this.x-i+50,this.y+10),t.lineTo(this.x-i+70,this.y-10),t.lineTo(this.x-i+80,this.y+10),t.fill();const h=this.width,s=this.health/5;t.fillStyle="#FF0000",t.fillRect(this.x-i,this.y-20,h,10),t.fillStyle="#00FF00",t.fillRect(this.x-i,this.y-20,h*s,10);for(let h of this.bananas)h.draw(t,i)}checkBananaCollisions(t){for(let i=this.bananas.length-1;i>=0;i--)if(Utils.checkCollision(this.bananas[i],t))return this.bananas.splice(i,1),!0;return!1}checkPlayerAttack(t){return t.velocityY>0&&t.x+t.width>this.x&&t.x<this.x+this.width&&t.y+t.height>this.y&&t.y<this.y+this.height/2&&(this.health--,!0)}}class Banana{constructor(t,i,h,s){this.x=t,this.y=i,this.width=20,this.height=20,this.vx=h,this.vy=s,this.gravity=.2,this.rotation=0,this.rotationSpeed=.1}update(){this.x+=this.vx,this.y+=this.vy,this.vy+=this.gravity,this.rotation+=this.rotationSpeed}draw(t,i){t.save(),t.translate(this.x-i+this.width/2,this.y+this.height/2),t.rotate(this.rotation),t.fillStyle="#FFD700",t.beginPath(),t.ellipse(0,0,this.width/2,this.height/4,0,0,2*Math.PI),t.fill(),t.restore()}}