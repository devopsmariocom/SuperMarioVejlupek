!function(){const i=document.createElement("div");i.style.position="fixed",i.style.top="10px",i.style.right="10px",i.style.backgroundColor="rgba(0, 0, 0, 0.7)",i.style.color="#fff",i.style.padding="10px",i.style.borderRadius="5px",i.style.zIndex="9999",i.style.maxWidth="80%",i.style.fontSize="12px",i.style.fontFamily="monospace";const t=navigator.userAgent,s=navigator.platform,h=navigator.maxTouchPoints,e="ontouchend"in document,o=window.screen.width+"x"+window.screen.height,l=/iPad/i.test(t)||/iPad/i.test(s),n=/MacIntel/i.test(s)&&h>1||/Macintosh/i.test(t)&&e,a=e&&Math.min(window.screen.width,window.screen.height)>=768&&Math.max(window.screen.width,window.screen.height)>=1024;i.innerHTML=`\n    <strong>DEVICE DEBUG INFO</strong><br>\n    User Agent: ${t.substring(0,50)}...<br>\n    Platform: ${s}<br>\n    Touch Points: ${h}<br>\n    Has Touch: ${e}<br>\n    Screen: ${o}<br>\n    iPad Standard: ${l}<br>\n    iPad Pro: ${n}<br>\n    iPad by Size: ${a}<br>\n    <strong>TOUCH MODE FORCED ON</strong>\n  `,document.body?document.body.appendChild(i):window.addEventListener("DOMContentLoaded",(function(){document.body.appendChild(i)})),console.log("=========================================="),console.log("DEVICE DETECTION DEBUG - IMMEDIATE CHECK"),console.log("=========================================="),console.log("User Agent:",t),console.log("Platform:",s),console.log("Max Touch Points:",h),console.log("Has ontouchend:",e),console.log("Screen size:",o),console.log("isStandardIpad:",l),console.log("isIpadPro:",n),console.log("isIpadBySize:",a),console.log("Combined iPad detection:",l||n||a),console.log("TOUCH MODE FORCED ON"),console.log("==========================================")}();class Player{constructor(i,t){this.x=i,this.y=t,this.width=40,this.height=60,this.velocityX=0,this.velocityY=0,this.speed=5,this.jumpForce=15,this.gravity=.8,this.isJumping=!1,this.canDoubleJump=!1,this.hasDoubleJumped=!1,this.color="#FF0000",this.lives=3,this.score=0;const s=/iPad/i.test(navigator.userAgent)||/iPad/i.test(navigator.platform),h=/MacIntel/i.test(navigator.platform)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>1||/Macintosh/i.test(navigator.userAgent)&&"ontouchend"in document,e="ontouchend"in document&&Math.min(window.screen.width,window.screen.height)>=768&&Math.max(window.screen.width,window.screen.height)>=1024;this.isIpad=s||h||e,this.isMobile=/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.isOtherTablet=/Android(?!.*Mobile)|Tablet/i.test(navigator.userAgent)||!this.isIpad&&navigator.maxTouchPoints>1&&window.innerWidth>=600,this.isTablet=this.isIpad||this.isOtherTablet,this.isTouchDevice=this.isMobile||this.isTablet,this.isTouchDevice=!0,console.log("Device detection info:"),console.log("- User Agent:",navigator.userAgent),console.log("- Platform:",navigator.platform),console.log("- Max Touch Points:",navigator.maxTouchPoints),console.log("- Has ontouchend:","ontouchend"in document),console.log("- Screen size:",window.screen.width,"x",window.screen.height),console.log("- isStandardIpad:",s),console.log("- isIpadPro:",h),console.log("- isIpadBySize:",e),console.log("- isIpad:",this.isIpad),console.log("- isMobile:",this.isMobile),console.log("- isTablet:",this.isTablet),console.log("- isTouchDevice:",this.isTouchDevice),this.isTouchDevice&&(this.speed=6,this.jumpForce=16),this.activeEffect=null,this.effectEndTime=0,this.hat=!1,this.hatColor="#333333",this.suit=!1,this.pooped=!1,this.hasCloud=!1,this.isInvincible=!1,this.glitching=!1,this.glitchFrame=0,this.visible=!0,this.reversedControls=!1,this.speedBoost=!1,this.shrunk=!1,this.doubleJumpEffect=!1,this.doubleJumpEffectTimer=0}update(i,t){this.glitching?(this.glitchFrame++,this.glitchFrame%5==0&&(this.visible=!this.visible)):this.visible=!0,this.velocityX=0,this.reversedControls?(i.keys.right&&(this.velocityX=-this.speed),i.keys.left&&(this.velocityX=this.speed)):(i.keys.left&&(this.velocityX=-this.speed),i.keys.right&&(this.velocityX=this.speed)),this.velocityY+=this.gravity,i.keys.up&&!this.isJumping?(this.velocityY=-this.jumpForce,this.isJumping=!0,this.canDoubleJump=!0,this.hasDoubleJumped=!1,this.isTouchDevice&&(i.keys.left||i.keys.right)&&(this.velocityX*=1.2)):i.keys.up&&i.keys.upPressed&&this.isJumping&&this.canDoubleJump&&!this.hasDoubleJumped&&(this.velocityY=.8*-this.jumpForce,this.hasDoubleJumped=!0,this.canDoubleJump=!1,this.doubleJumpEffect=!0,this.doubleJumpEffectTimer=15),this.doubleJumpEffect&&(this.doubleJumpEffectTimer--,this.doubleJumpEffectTimer<=0&&(this.doubleJumpEffect=!1)),this.isTouchDevice&&this.isJumping&&this.velocityY<0&&!i.keys.up&&this.velocityY<-5&&(this.velocityY=-5),this.hasCloud&&(this.velocityY>2&&(this.velocityY=2),i.keys.up&&i.keys.upPressed&&(this.velocityY=.7*-this.jumpForce,i.keys.upPressed=!1)),this.x+=this.velocityX,this.y+=this.velocityY,this.glitching&&Math.random()<.1&&(this.x+=10*(Math.random()-.5),this.y+=10*(Math.random()-.5)),this.isJumping=!0;for(let i of t)this.glitching&&Math.random()<.2||this.velocityY>0&&this.x+this.width>i.x&&this.x<i.x+i.width&&this.y+this.height>=i.y&&this.y+this.height<=i.y+this.velocityY+10&&(this.y=i.y-this.height,this.velocityY=0,this.isJumping=!1,this.hasDoubleJumped=!1,this.canDoubleJump=!1);this.x<0&&(this.x=0),this.y>600&&(this.isInvincible||this.lives--,this.lives>0&&(this.velocityY=0))}draw(i,t=0){if(this.visible){if(i.save(),this.isInvincible&&(i.globalAlpha=.7+.3*Math.sin(Date.now()/100)),this.hasCloud){i.fillStyle="rgba(255, 255, 255, 0.8)",i.beginPath();const s=this.x-t+this.width/2,h=this.y+this.height-10,e=.8*this.width;i.arc(s-e/2,h,e/2,0,2*Math.PI),i.arc(s,h-e/4,e/1.7,0,2*Math.PI),i.arc(s+e/2,h,e/2,0,2*Math.PI),i.fill()}if(this.doubleJumpEffect){const s=.5*Math.sin(Date.now()/30)+.5;i.fillStyle=`rgba(255, 255, 255, ${s})`,i.shadowColor="white",i.shadowBlur=10,i.fillRect(this.x-t,this.y,this.width,this.height),i.shadowBlur=0,i.fillStyle=this.color,i.globalAlpha=.7,i.fillRect(this.x-t,this.y,this.width,this.height),i.globalAlpha=1}else i.fillStyle=this.color,i.fillRect(this.x-t,this.y,this.width,this.height);if(this.suit&&(i.fillStyle="#FF0000",i.beginPath(),i.moveTo(this.x-t+this.width/2,this.y+10),i.lineTo(this.x-t+this.width/2-8,this.y+5),i.lineTo(this.x-t+this.width/2-8,this.y+15),i.lineTo(this.x-t+this.width/2,this.y+10),i.fill(),i.beginPath(),i.moveTo(this.x-t+this.width/2,this.y+10),i.lineTo(this.x-t+this.width/2+8,this.y+5),i.lineTo(this.x-t+this.width/2+8,this.y+15),i.lineTo(this.x-t+this.width/2,this.y+10),i.fill(),i.fillStyle="#FFFFFF",i.fillRect(this.x-t+this.width/2-2,this.y+20,4,4),i.fillRect(this.x-t+this.width/2-2,this.y+30,4,4),i.fillRect(this.x-t+this.width/2-2,this.y+40,4,4)),i.fillStyle="#FFFFFF",i.fillRect(this.x-t+10,this.y+15,5,5),i.fillRect(this.x-t+25,this.y+15,5,5),this.pooped?(i.fillStyle="#000000",i.beginPath(),i.arc(this.x-t+this.width/2,this.y+40,8,Math.PI,2*Math.PI),i.fill(),i.fillStyle="#8B4513",i.beginPath(),i.arc(this.x-t+this.width/2,this.y-5,10,0,2*Math.PI),i.fill(),i.fillStyle="#5D3A1A",i.beginPath(),i.arc(this.x-t+this.width/2-3,this.y-8,2,0,2*Math.PI),i.fill(),i.beginPath(),i.arc(this.x-t+this.width/2+4,this.y-6,2,0,2*Math.PI),i.fill()):(i.fillStyle="#000000",this.velocityX>0?(i.beginPath(),i.arc(this.x-t+this.width/2,this.y+35,8,0,Math.PI),i.fill()):this.velocityX<0?(i.beginPath(),i.arc(this.x-t+this.width/2,this.y+40,8,Math.PI,2*Math.PI),i.fill()):i.fillRect(this.x-t+15,this.y+35,10,3)),this.hat&&(i.fillStyle=this.hatColor,i.fillRect(this.x-t-5,this.y-5,this.width+10,5),i.fillRect(this.x-t+5,this.y-15,this.width-10,10)),this.speedBoost){i.fillStyle="rgba(255, 255, 255, 0.7)";for(let s=0;s<5;s++){const h=this.x-t-10-5*s,e=10+3*s,o=this.y+this.height/2-e/2;i.fillRect(h,o,2,e)}}i.restore()}}}